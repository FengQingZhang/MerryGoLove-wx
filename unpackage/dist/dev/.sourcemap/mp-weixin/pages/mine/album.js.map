{"version":3,"sources":["uni-app:///main.js","webpack:///G:/小程序/MerryGoLove/MerryGoLove/pages/mine/album.vue?e768","webpack:///G:/小程序/MerryGoLove/MerryGoLove/pages/mine/album.vue?e563","webpack:///G:/小程序/MerryGoLove/MerryGoLove/pages/mine/album.vue?822e","webpack:///G:/小程序/MerryGoLove/MerryGoLove/pages/mine/album.vue?9331","uni-app:///pages/mine/album.vue"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,4F,6FAFmBA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC;AAGnBC,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;;;AAGpD;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,qOAEN;AACP,KAAK;AACL;AACA,aAAa,4WAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACtCA;AAAA;AAAA;AAAA;AAA+lB,CAAgB,ynBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACqBnnB;AACA;AACA;AACA;AACA,iE;;;;;;;;;;;;;;;;;;;;eACA,EACA,IADA,kBACA,CACA,SACA,UACA,aADA,EAEA,yEAFA,EAGA,gBAHA,EAIA,eAJA,EADA,EAOA,UAPA,EAQA,UARA,EASA,YATA,EAUA,WAVA,GAYA,CAdA,EAeA,WACA;AACA,gBAFA,0BAEA,CACA,8BACA,iBACA,CALA;AAMA;AACA,UAPA,kBAOA,CAPA,EAOA;AACA;AACA;AACA;AACA;AACA,wCADA;AAEA,sCAFA;AAGA,8BAHA;AAIA,kCAJA;;AAMA;AACA;AACA,KAnBA;AAoBA,OApBA,eAoBA,CApBA,EAoBA;AACA;AACA;AACA,OAFA;AAGA,KAxBA;AAyBA,QAzBA,gBAyBA,CAzBA,EAyBA;AACA;AACA,KA3BA;AA4BA;AACA,UA7BA,oBA6BA;AACA;AACA;AACA;AACA;AACA;AACA,mBADA,EACA;AACA,yBAFA;AAGA,yBAHA;;AAKA;AACA;AACA;AACA;;AAEA,KA5CA;AA6CA;AACA;AACA,eA/CA,yBA+CA;AACA;AACA;AACA,0BAHA;AAIA,OAJA;AAKA;AACA;AACA,oDADA;AAEA,uCAFA;AAGA,wBAHA;AAIA;AACA,8BADA,EAJA;;AAOA;AACA,mDADA,EAPA;;AAUA;AACA;AACA;AACA,aAbA;AAcA;AACA;AACA,aAhBA;;AAkBA,SAnBA,GALA,EAIA;AAqBA;AACA;AACA;AACA,OAFA,EAEA,KAFA,CAEA;AACA;AACA;AACA,OALA;AAMA;AACA;AACA,KAjFA;AAkFA;AACA,gBAnFA,0BAmFA;AACA;AACA;AACA,gCADA;AAEA,8BAFA;AAGA;;AAEA;AACA,WANA;;AAQA,OATA;AAUA,KA9FA,EAfA;;AA+GA,QA/GA,kBA+GA,MA/GA,EA+GA;AACA;AACA,GAjHA,E","file":"pages/mine/album.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/mine/album.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./album.vue?vue&type=template&id=ea527528&\"\nvar renderjs\nimport script from \"./album.vue?vue&type=script&lang=js&\"\nexport * from \"./album.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/mine/album.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./album.vue?vue&type=template&id=ea527528&\"","var components\ntry {\n  components = {\n    nv: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/pyh-nv/components/pyh-nv/pyh-nv\" */ \"@/uni_modules/pyh-nv/components/pyh-nv/pyh-nv.vue\"\n      )\n    },\n    uniFilePicker: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-file-picker/components/uni-file-picker/uni-file-picker\" */ \"@/uni_modules/uni-file-picker/components/uni-file-picker/uni-file-picker.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./album.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./album.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"main-no-color\">\r\n\t\t<nv :config=\"config\"></nv>\r\n\t\t<van-toast id=\"van-toast\" />\r\n\t\t<view class=\"album-div\">\r\n\t\t\t<van-empty v-show=\"!show\" class=\"custom-image\" image=\"https://img01.yzcdn.cn/vant/custom-empty-image.png\"\r\n\t\t\t\tdescription=\"空空如也,也是一种态度\">\r\n\t\t\t\t<van-button round type=\"danger\" class=\"bottom-button\" @click='openUploader'>选择照片</van-button>\r\n\t\t\t</van-empty>\r\n\t\t\t<view v-show=\"show\">\r\n\t\t\t\t<uni-file-picker ref=\"picker\" v-model=\"images\" file-mediatype=\"image\" mode=\"grid\" file-extname=\"png,jpg\"\r\n\t\t\t\t\t:limit=\"9\" :auto-upload=\"false\" @fail=\"fail\" @select=\"select\" @delete=\"del\">\r\n\t\t\t\t</uni-file-picker>\r\n\t\t\t\t<view style=\"margin-top: 10%;\">\r\n\t\t\t\t\t<button type=\"warn\" @click=\"upload\">确认上传</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n<script>\r\n\timport Toast from '../../wxcomponents/vant/dist/toast/toast.js'\r\n\timport axios from \"../../common/util/axios.js\";\r\n\timport config from \"../../common/config.js\";\r\n\timport '../../static/css/public/style.css';\r\n\timport '../../static/css/album/album.css';\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tconfig: {\r\n\t\t\t\t\ttitle: '我的照片',\r\n\t\t\t\t\tbgColor: 'linear-gradient(90deg, RGB(122, 120, 255), RGB(103, 220, 225))',\r\n\t\t\t\t\tcolor: '#ffffff',\r\n\t\t\t\t\thideback: false,\r\n\t\t\t\t},\r\n\t\t\t\topenid: '',\r\n\t\t\t\timages: [],\r\n\t\t\t\tfileList: [],\r\n\t\t\t\tshow: false,\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t//上传相片按钮事件，\r\n\t\t\topenUploader() {\r\n\t\t\t\tthis.$refs['picker'].choose();\r\n\t\t\t\tthis.show = true;\r\n\t\t\t},\r\n\t\t\t// 获取上传状态\r\n\t\t\tselect(e) {\r\n\t\t\t\t//将文件加入上传list\r\n\t\t\t\tfor (let i = 0; i < e.tempFiles.length; i++) {\r\n\t\t\t\t\tlet parameter = e.tempFiles[i].file;\r\n\t\t\t\t\tlet file = {\r\n\t\t\t\t\t\tcloudPath: parameter.cloudPath,\r\n\t\t\t\t\t\tfileType: parameter.fileType,\r\n\t\t\t\t\t\tname: parameter.name,\r\n\t\t\t\t\t\tfilePath: parameter.path,\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.fileList.push(file);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdel(e) {\r\n\t\t\t\tthis.fileList = this.fileList.filter(item => {\r\n\t\t\t\t\treturn !item == e.tempFile.cloudPath\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tfail(e) {\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t},\r\n\t\t\t//确认上传\r\n\t\t\tupload() {\r\n\t\t\t\tif (this.fileList.length < 2) {\r\n\t\t\t\t\tToast('请上传不少于2张照片');\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tlet toast = Toast.loading({\r\n\t\t\t\t\tduration: 0, // 持续展示 toast\r\n\t\t\t\t\tmessage: '上传中...',\r\n\t\t\t\t\tforbidClick: true,\r\n\t\t\t\t});\r\n\t\t\t\t//云空间上传\r\n\t\t\t\t//this.could_upload();\r\n\t\t\t\t//服务器上传\r\n\t\t\t\tthis.self_upload();\r\n\r\n\t\t\t},\r\n\t\t\t//服务器上传\r\n\t\t\t//微信小程序只能单文件上传，目瞪口呆\r\n\t\t\tself_upload() {\r\n\t\t\t\tlet openid = this.openid;\r\n\t\t\t\tlet files = this.fileList;\r\n\t\t\t\tlet requestArr = [];\r\n\t\t\t\tfor (let i = 0; i < files.length; i++) {\r\n\t\t\t\t\trequestArr.push(new Promise((resolve,reject)=>{\r\n\t\t\t\t\t\twx.uploadFile({\r\n\t\t\t\t\t\t      url: config.url + '/user/photo',\r\n\t\t\t\t\t\t      filePath: files[i].filePath,\r\n\t\t\t\t\t\t      name: 'file',\r\n\t\t\t\t\t\t      formData: {\r\n\t\t\t\t\t\t        'openid':openid\r\n\t\t\t\t\t\t      },\r\n\t\t\t\t\t\t\t  header: {\r\n\t\t\t\t\t\t\t  \t\"content-type\": \"multipart/form-data\",\r\n\t\t\t\t\t\t\t  },\r\n\t\t\t\t\t\t      success:(res)=>{\r\n\t\t\t\t\t\t\t\tresolve(res);\r\n\t\t\t\t\t\t        //do something\r\n\t\t\t\t\t\t      },\r\n\t\t\t\t\t\t\t  fail: (error) => {\r\n\t\t\t\t\t\t\t  \treject(error);\r\n\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}));\r\n\t\t\t\t}\r\n\t\t\t\tPromise.all(requestArr).then((res)=>{\r\n\t\t\t\t\tToast.success(\"上传成功\");\r\n\t\t\t\t}).catch((error)=>{\r\n\t\t\t\t\tToast.fail(\"上传失败\");\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t});\r\n\t\t\t\t//清空请求队列；\r\n\t\t\t\trequestArr=[];\r\n\t\t\t},\r\n\t\t\t//上传至云空间\r\n\t\t\tcould_upload() {\r\n\t\t\t\tthis.fileList.forEach(e => {\r\n\t\t\t\t\tuniCloud.uploadFile({\r\n\t\t\t\t\t\tcloudPath: e.cloudPath,\r\n\t\t\t\t\t\tfilePath: e.filePath,\r\n\t\t\t\t\t\tsuccess: (e) => {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tconsole.log(e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t},\r\n\t\tonLoad(option) {\r\n\t\t\tthis.openid = option.openid;\r\n\t\t}\r\n\t}\r\n</script>\r\n<style>\r\n</style>\n"],"sourceRoot":""}