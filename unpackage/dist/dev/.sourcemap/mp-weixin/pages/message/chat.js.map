{"version":3,"sources":["uni-app:///main.js","webpack:///G:/小程序/MerryGoLove/MerryGoLove/pages/message/chat.vue?19b5","webpack:///G:/小程序/MerryGoLove/MerryGoLove/pages/message/chat.vue?e0b4","webpack:///G:/小程序/MerryGoLove/MerryGoLove/pages/message/chat.vue?e199","webpack:///G:/小程序/MerryGoLove/MerryGoLove/pages/message/chat.vue?eda6","uni-app:///pages/message/chat.vue"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,4F,6FAFmBA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC;AAGnBC,UAAU,CAACC,aAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;;;AAGnD;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,qOAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjCA;AAAA;AAAA;AAAA;AAA8lB,CAAgB,wnBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACuDlnB;AACA;AACA;AACA;AACA,kE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA,EACA,IADA,kBACA,CACA,SACA,eADA,EACA;AACA,sBAFA,EAGA,UACA,WADA,EAEA,kBAFA,EAGA,gBAHA,EAIA,eAJA,EAKA,WALA,EAHA,EAUA,oDAVA,EAUA;AACA,sBAXA,EAWA;AACA,gBAZA,EAYA;AACA,sBAbA,EAaA;AACA,aAdA,EAcA;AACA,kBACA,iBADA,EAEA,mBAFA,EAGA,sCAHA,IAKA,EAEA,aAFA,EAGA,mBAHA,EAIA,sBAJA,EALA,CAfA,EA2BA,UA3BA,EA4BA,OA5BA,EA4BA;AACA,cA7BA,CA6BA;AA7BA,MA+BA,CAjCA,EAkCA,WACA;AACA,SAFA,mBAEA,CACA;AACA;AACA,KALA,EAMA;AACA,QAPA,kBAOA,CACA;AACA;AACA,KAVA,EAWA,SAXA,uBAWA,CACA,mBACA,oBACA,aADA,EAEA,mBAFA,EAGA,YAHA,IAKA,cACA,CAnBA,EAoBA,IApBA,gBAoBA,CApBA,EAoBA,CACA,cACA,oBACA,aADA,EAEA,mBAFA,EAGA,uBAHA,IAKA,CA3BA,EA4BA;AACA,iBA7BA,2BA6BA,CACA,gEACA,mEACA,8BACA,cADA,EAEA;AACA;AACA,SAJA;AAKA;AACA;AACA,SAPA;;AASA,KAzCA;AA0CA;AACA,cA3CA,sBA2CA,GA3CA,EA2CA;AACA;AACA,KA7CA;AA8CA;AACA,aA/CA,uBA+CA;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA;AACA,KAvDA;AAwDA;AACA,YAzDA,sBAyDA;AACA;AACA;AACA,sBADA;AAEA,0BAFA;AAGA,kBAHA;AAIA,UAJA,CAIA;AACA;AACA,OANA,EAMA,KANA,CAMA;AACA;AACA,OARA;AASA,KApEA,EAlCA;;AAwGA,QAxGA,kBAwGA,MAxGA,EAwGA;AACA;AACA;AACA;AACA;AACA;AACA,GA9GA;AA+GA,SA/GA,qBA+GA;;AAEA,GAjHA;AAkHA,SAlHA,qBAkHA;;AAEA,GApHA,E","file":"pages/message/chat.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/message/chat.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./chat.vue?vue&type=template&id=042db559&\"\nvar renderjs\nimport script from \"./chat.vue?vue&type=script&lang=js&\"\nexport * from \"./chat.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/message/chat.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chat.vue?vue&type=template&id=042db559&\"","var components\ntry {\n  components = {\n    nv: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/pyh-nv/components/pyh-nv/pyh-nv\" */ \"@/uni_modules/pyh-nv/components/pyh-nv/pyh-nv.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chat.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"main-no-color\" style=\"background-color: #f1f1f1;\">\r\n\t\t<nv :config=\"config\"></nv>\r\n\t\t<van-divider hairline customStyle=\"width:90%;margin: 0 auto;margin-top:1%;\" />\r\n\t\t<scroll-view :scroll-y=\"true\" :scroll-into-view=\"toView\">\r\n\t\t\t<block v-for='(item,index) in msgList' :key=\"index\">\r\n\t\t\t\t<!-- 单个消息1 客服发出（左） -->\r\n\t\t\t\t<view v-if=\"item.speaker=='others'\" :id=\"'msg-'+index\"\r\n\t\t\t\t\tstyle='display: flex; padding: 2vw 11vw 2vw 2vw;'>\r\n\t\t\t\t\t<view style='width: 11vw; height: 11vw;'>\r\n\t\t\t\t\t\t<image style='width: 11vw; height: 11vw; border-radius: 10rpx;' :src='othersHeadIcon'></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class='leftMsg'>\r\n\t\t\t\t\t\t<view class=\"left-triangle\"></view>\r\n\t\t\t\t\t\t{{item.content}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- 单个消息2 用户发出（右） -->\r\n\t\t\t\t<view v-else :id=\"'msg-'+index\"\r\n\t\t\t\t\tstyle='display: flex; justify-content: flex-end; padding: 2vw 2vw 2vw 11vw;'>\r\n\t\t\t\t\t<view class='rightMsg'>\r\n\t\t\t\t\t\t<view class=\"right-triangle\"></view>\r\n\t\t\t\t\t\t{{item.content}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view style='width: 11vw; height: 11vw;'>\r\n\t\t\t\t\t\t<image style='width: 11vw; height: 11vw; border-radius: 10rpx;' :src='selfHeadIcon'></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</block>\r\n\t\t\t<!-- 占位空间 -->\r\n\t\t\t<view style='width: 100%; height: 18vw;'></view>\r\n\t\t</scroll-view>\r\n\t\t<view id=\"inputRoom\" class='inputRoom' :style=\"{height:inputHight+'vw'}\">\r\n\t\t\t<view style=\"display: flex;align-items: center;margin-top: 2vw;\">\r\n\t\t\t\t<view @click=\"showEmoji\" style=\"margin-left: 3vw;font-size: 6vw;\">☺</view>\r\n\t\t\t\t<input v-model=\"msg\" name=\"input\" id=\"msg-input\" :adjust-position='false' @confirm='send'\r\n\t\t\t\t\tconfirm-type='send' @focus='focus' @blur='blur'></input>\r\n\t\t\t\t<button formType=\"submit\" class=\"btn\" type=\"primary\" @click='sendClick' style='width: 18vw;'\r\n\t\t\t\t\tsize=\"mini\">发送</button>\r\n\t\t\t</view>\r\n\t\t\t<view v-show=\"emjioBar\">\r\n\t\t\t\t<scroll-view class=\"emjio-view-item\" :scroll-y=\"true\">\r\n\t\t\t\t\t<van-grid border=\"false\" :column-num=\"8\">\r\n\t\t\t\t\t\t<van-grid-item use-slot v-for=\"(item,index) in face\" :key='index'>\r\n\t\t\t\t\t\t\t<view style=\"font-size: 6vw;\" @click=\"emojiChose(item.value)\">{{item.value}}</view>\r\n\t\t\t\t\t\t</van-grid-item>\r\n\t\t\t\t\t</van-grid>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t</view>\r\n</template>\r\n<script>\r\n\timport axios from \"../../common/util/axios.js\";\r\n\timport config from \"../../common/config.js\";\r\n\timport '../../static/css/chat/chat.css';\r\n\timport '../../static/css/public/style.css';\r\n\timport '../../static/css/icon/iconfont.css';\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\temjioBar: false,//表情框是否显示\r\n\t\t\t\tinputHight: '18',\r\n\t\t\t\tconfig: {\r\n\t\t\t\t\ttitle: '消息',\r\n\t\t\t\t\tbgColor: '#ffffff',\r\n\t\t\t\t\tcolor: '#000000',\r\n\t\t\t\t\thideback: false,\r\n\t\t\t\t\tmessage: '',\r\n\t\t\t\t},\r\n\t\t\t\tothersHeadIcon:'https://img.yzcdn.cn/vant/cat.jpeg',//聊天对象的头像\r\n\t\t\t\tselfHeadIcon: '',//登录者的头像\r\n\t\t\t\topenid: '',//登录者openid\r\n\t\t\t\tothersOpenid:'',//聊天对象的openid\r\n\t\t\t\tmsg: '',//聊天输入框绑定值\r\n\t\t\t\tmsgList: [{\r\n\t\t\t\t\t\tspeaker: 'others',\r\n\t\t\t\t\t\tcontentType: 'text',\r\n\t\t\t\t\t\tcontent: '欢迎来到英雄联盟，敌军还有30秒到达战场，请做好准备！'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\r\n\t\t\t\t\t\tspeaker: 'me',\r\n\t\t\t\t\t\tcontentType: 'text',\r\n\t\t\t\t\t\tcontent: '我怕是走错片场了...'\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\ttoView: '',\r\n\t\t\t\twbs: '',//websocket对象\r\n\t\t\t\tface: [],//表情数据\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t//输入框获取焦点时缩小宽度\r\n\t\t\tfocus() {\r\n\t\t\t\t//this.inputWidth =70;\r\n\t\t\t\t//this.show =true;\r\n\t\t\t},\r\n\t\t\t//输入失去焦点时增大宽度。\r\n\t\t\tblur() {\r\n\t\t\t\t//this.inputWidth =89;\r\n\t\t\t\t//this.show = false;\r\n\t\t\t},\r\n\t\t\tsendClick() {\r\n\t\t\t\tlet msg = this.msg;\r\n\t\t\t\tthis.msgList.push({\r\n\t\t\t\t\tspeaker: 'me',\r\n\t\t\t\t\tcontentType: 'text',\r\n\t\t\t\t\tcontent: msg,\r\n\t\t\t\t});\r\n\t\t\t\tthis.msg = '';\r\n\t\t\t},\r\n\t\t\tsend(e) {\r\n\t\t\t\tthis.msg = '';\r\n\t\t\t\tthis.msgList.push({\r\n\t\t\t\t\tspeaker: 'me',\r\n\t\t\t\t\tcontentType: 'text',\r\n\t\t\t\t\tcontent: e.detail.value,\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//websocket初始化\r\n\t\t\twebSocketInit() {\r\n\t\t\t\tlet socketUrl = config.websocket_address + this.openid;\r\n\t\t\t\tsocketUrl=socketUrl.replace(\"https\", \"ws\").replace(\"http\", \"ws\");\r\n\t\t\t\tthis.wbs = wx.connectSocket({\r\n\t\t\t\t\turl: socketUrl,\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tconsole.log(\"连接成功\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (error) => {\r\n\t\t\t\t\t\tconsole.log(\"连接失败\"+errror);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//表情选择\r\n\t\t\temojiChose(val){\r\n\t\t\t\tthis.msg+= val;\r\n\t\t\t},\r\n\t\t\t//表情框的显示与隐藏\r\n\t\t\tshowEmoji() {\r\n\t\t\t\tif (this.emjioBar) {\r\n\t\t\t\t\tthis.emjioBar = false;\r\n\t\t\t\t\tthis.inputHight = 18;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.emjioBar = true;\r\n\t\t\t\t\tthis.inputHight = 65;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//获取表情的数据。\r\n\t\t\temojiOpt() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tthis.$axios({\r\n\t\t\t\t\tmethods: 'get',\r\n\t\t\t\t\turl: '/chat/emoji',\r\n\t\t\t\t\tparams: {}\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tthat.face = res.data;\r\n\t\t\t\t}).catch(erro => {\r\n\t\t\t\t\tconsole.log(erro);\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(option) {\r\n\t\t\tthis.config.title = option.chatWith;\r\n\t\t\tthis.openid = option.openid;\r\n\t\t\tthis.selfHeadIcon = option.selfHead;\r\n\t\t\tthis.emojiOpt();\r\n\t\t\tthis.webSocketInit();\r\n\t\t},\r\n\t\tcreated() {\r\n\r\n\t\t},\r\n\t\tmounted() {\r\n\r\n\t\t}\r\n\t}\r\n</script>\r\n<style>\r\n</style>\n"],"sourceRoot":""}